<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>My Portfolio</title>
	<link rel="stylesheet" href="styles/style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
	<script src="js/jquery.js"></script>

</head>
<body>
	
	<main>
		
		
		<div class="card" style="width:18rem; background-color: white;">

			<a href="https://stackoverflow.com/users/11949224/rajesh-pudasaini"><img src="https://stackoverflow.com/users/flair/11949224.png" width="208" height="58" alt="profile for Rajesh Pudasaini at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Rajesh Pudasaini at Stack Overflow, Q&amp;A for professional and enthusiast programmers"></a>


			<img class="card-img-top prof-img" src="images/profileImg.JPG" alt="razyesh_profile_image" />
			<div class="card-body">
				<h5>Hi, I am Rajesh!</h5>
				<p>I love programming, doing research, and love to learn new tech stack.</p>
				<p>Also, I love Trekking.</p>
			</div>
			<div class="actionBtn">
		<button class="btn btn-sm btn-dark" id="getGithub">View Github Profile</button>
		<hr />
		
	</div>
			
		</div>
	
	<div class="card" id="githubDetail">
		<div class="card-body">
			<h5 id="githubUsername"></h5>
			<h5 id="githubFullname"></h5>

			<div class="grid-container">
				<h6 id="followersCount"><div class="loader" id="loadingFollowersCount" hidden></div></h6>
				<h6 id="followingCount"><div class="loader" id="loadingFollowingCount" hidden></div></h6>
				<h6 id="noOfRepos"><div class="loader" id="loadingNoOfRepos" hidden></div></h6>

				<h6>Followers</h6>
				<h6>Following</h6>
				<h6>No. of Public Repos. </h6>

			</div>

		</div>
		<button class="btn btn-sm btn-danger float-right" id="githubRepo">View All Repos</button>
		<div class="card" id="reposList">
		  <div class="card-header">
		    Github Repos
		  </div>
		  <div class="card-body" id="repoContainer">
		   <div class="loader" id="loadingRepos" hidden></div>
		  </div>
		</div>
		
	</div>
	
	</main>

	<script>

		$("#getGithub").click(function(){
			$("#githubDetail").toggle();
			document.getElementById("loadingFollowersCount").hidden = false;
			document.getElementById("loadingFollowingCount").hidden = false;
			document.getElementById("loadingNoOfRepos").hidden = false;



			if (document.getElementById("githubDetail").style.display == "block"){


				try {

				fetch('https://api.github.com/users/razyesh')
						.then(response => response.json())
							.then(function(data){

								if (data){
								document.getElementById("loadingFollowersCount").hidden = true;
			document.getElementById("loadingFollowingCount").hidden = true;
			document.getElementById("loadingNoOfRepos").hidden = true;

								let githubUsername = data['login'];
								let fullName = data['name'];
								let followersCount = data['followers'];
								let followingCount = data['following'];
								let reposCount = data['public_repos'];
								reposURL = data['repos_url'];
								document.getElementById("githubUsername").innerHTML = "Username: " + githubUsername;
								document.getElementById("githubFullname").innerHTML = "Full Name: " + fullName;
								document.getElementById("followersCount").innerHTML = followersCount;
								document.getElementById("followingCount").innerHTML = followingCount;
								document.getElementById("noOfRepos").innerHTML = reposCount;

							} 

							})

				} catch(e){
					console.log(e);
				}
				}		
		});

		$("#githubRepo").click(function (){
			$("#reposList").toggle();
			document.getElementById("loadingRepos").hidden = false;

			$.ajax('https://api.github.com/users/razyesh/repos',{
				dataType: 'json',
				success : function (data, status, xhr){
					document.getElementById("loadingRepos").hidden = true;

					var repoContainer = document.getElementById("repoContainer");
					for (var i=0; i<data.length ; i++){
						var heading = document.createElement("h5");
						heading.innerHTML = i+1 + "." + data[i].name;
						var language = document.createElement("p");
						language.innerHTML = "language: " + data[i].language;
						var gitCloneUrl = document.createElement("button");
						gitCloneUrl.id = "gitCloneUrl";
						gitCloneUrl.innerHTML = data[i].clone_url;
						gitCloneUrl.href= data[i].clone_url;
						repoContainer.appendChild(heading);
						repoContainer.appendChild(language);
						repoContainer.appendChild(gitCloneUrl);
					}
				}
			})
		})

		
		
	</script>
	
</body>
</html>